<div class="row row-deck row-cards mb-3">
    <div class="col-sm-6 col-lg-4">
        <div class="card">
            <div class="card-body">
                <div class="subheader">Total allocations</div>
                <div class="h1 mt-2 mb-0">{{ panel.total|number_format(0, ',', '.') }}</div>
                <div class="text-muted">All allocations in {{ scope.scopeType }}</div>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card">
            <div class="card-body">
                <p class="mb-2">Gender distribution</p>
                <div class="progress progress-separated mb-3">
                    <div class="progress-bar bg-primary" style="width: {{ panel.pctMale }}%"   aria-label="Male"></div>
                    <div class="progress-bar bg-pink"    style="width: {{ panel.pctFemale }}%" aria-label="Female"></div>
                    <div class="progress-bar bg-purple"  style="width: {{ panel.pctDiverse }}%" aria-label="Diverse"></div>
                </div>
                <div class="row">
                    <div class="col-auto d-flex align-items-center pe-2">
                        <span class="legend me-2 bg-primary"></span>
                        <span>Male</span>
                        <span class="text-muted ms-2">{{ panel.genderM }} ({{ panel.pctMale }}%)</span>
                    </div>
                    <div class="col-auto d-flex align-items-center px-2">
                        <span class="legend me-2 bg-pink"></span>
                        <span>Female</span>
                        <span class="text-muted ms-2">{{ panel.genderW }} ({{ panel.pctFemale }}%)</span>
                    </div>
                    <div class="col-auto d-flex align-items-center px-2">
                        <span class="legend me-2 bg-purple"></span>
                        <span>Diverse</span>
                        <span class="text-muted ms-2">{{ panel.genderD }} ({{ panel.pctDiverse }}%)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card">
            <div class="card-body">
                <p class="mb-2">Urgency 1 / 2 / 3</p>
                <div class="progress progress-separated mb-3">
                    <div class="progress-bar bg-red"    style="width: {{ panel.pctUrg1 }}%" aria-label="U1"></div>
                    <div class="progress-bar bg-yellow" style="width: {{ panel.pctUrg2 }}%" aria-label="U2"></div>
                    <div class="progress-bar bg-green"  style="width: {{ panel.pctUrg3 }}%" aria-label="U3"></div>
                </div>
                <div class="row">
                    <div class="col-auto d-flex align-items-center pe-2">
                        <span class="legend me-2 bg-red"></span>
                        <span>U1</span>
                        <span class="text-muted ms-2">{{ panel.urg1 }} ({{ panel.pctUrg1 }}%)</span>
                    </div>
                    <div class="col-auto d-flex align-items-center px-2">
                        <span class="legend me-2 bg-yellow"></span>
                        <span>U2</span>
                        <span class="text-muted ms-2">{{ panel.urg2 }} ({{ panel.pctUrg2 }}%)</span>
                    </div>
                    <div class="col-auto d-flex align-items-center px-2">
                        <span class="legend me-2 bg-green"></span>
                        <span>U3</span>
                        <span class="text-muted ms-2">{{ panel.urg3 }} ({{ panel.pctUrg3 }}%)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<twig:HourlyChart
    :labels="hourly.labels"
    :series="hourly.series"
    height="280"
/>

<twig:AgeChart
    :labels="age.labels"
    :series="age.series"
    :mean="age.mean"
    height="250"
/>

<div class="card mb-3">
    <div class="card-body p-0">
        <table class="table card-table table-vcenter">
            <thead>
            <tr>
                <th>Indicator</th>
                <th>Value</th>
                <th>Share</th>
            </tr>
            </thead>
            <tbody>
            <tr><td>With physician</td><td>{{ panel.withPhysician }}</td><td>{{ panel.pctWithPhysician }}%</td></tr>
            <tr><td>CPR</td><td>{{ panel.isCpr }}</td><td>{{ panel.pctCpr }}%</td></tr>
            <tr><td>Ventilated</td><td>{{ panel.isVentilated }}</td><td>{{ panel.pctVentilated }}%</td></tr>
            <tr><td>Shock</td><td>{{ panel.isShock }}</td><td>{{ panel.pctShock }}%</td></tr>
            <tr><td>Pregnant</td><td>{{ panel.isPregnant }}</td><td>{{ panel.pctPregnant }}%</td></tr>
            <tr><td>Infectious</td><td>{{ panel.infectious }}</td><td>{{ panel.pctInfectious }}%</td></tr>
            <tr><td>Cathlab required</td><td>{{ panel.cathlabRequired }}</td><td>{{ panel.pctCathlabRequired }}%</td></tr>
            <tr><td>Resuscitation required</td><td>{{ panel.resusRequired }}</td><td>{{ panel.pctResusRequired }}%</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row row-cards mb-3">
    {% set total = topCats.total %}

    {% set cards = {
        Occasions: topCats.occasion.items,
        Assignments: topCats.assignment.items,
        Infections: topCats.infection.items,
        Indications: topCats.indication.items,
        Specialities: topCats.speciality.items,
        Departments: topCats.department.items,
    } %}

    {% for title, items in cards %}
        <div class="col-sm-6 col-lg-6">
            <twig:TopCategoryCard
                :title="title"
                :items="items"
                :total="total"
            />
        </div>
    {% endfor %}
</div>
