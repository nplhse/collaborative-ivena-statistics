{% macro sortArrow(sortName, sortBy, orderBy) %}
    {% if sortBy == sortName %}
        {% if orderBy == 'asc' %}
            <twig:ux:icon name="tabler:chevron-up" width="1em" height="1em" />
        {% else %}
            <twig:ux:icon name="tabler:chevron-down" width="1em" height="1em" />
        {% endif %}
    {% else %}
        <twig:ux:icon name="tabler:selector" width="1em" height="1em" />
    {% endif %}
{% endmacro %}

{% macro results(numResults, pageSize) %}
    <div class="dropdown">
        <a class="btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
            <span class="me-1">
                {{ 'label.pagination_results'|trans({pageSize: pageSize}) }}
            </span>
        </a>
        <div class="dropdown-menu">
            <a class="dropdown-item"
               href="{{ path(app.request.attributes.get('_route'),
                   app.request.query.all|merge({limit: 25, page: 1})) }}">
                {{ 'label.pagination_results'|trans({pageSize: 25}) }}
            </a>
            <a class="dropdown-item"
               href="{{ path(app.request.attributes.get('_route'),
                   app.request.query.all|merge({limit: 50, page: 1})) }}">
                {{ 'label.pagination_results'|trans({pageSize: 50}) }}
            </a>
            <a class="dropdown-item"
               href="{{ path(app.request.attributes.get('_route'),
                   app.request.query.all|merge({limit: 100, page: 1})) }}">
                {{ 'label.pagination_results'|trans({pageSize: 100}) }}
            </a>
        </div>
    </div>
{% endmacro %}

{% macro navbar(paginator, targetPath) %}
    {% if paginator.hasToPaginate %}
        <ul class="pagination m-0 ms-auto">
            {% if paginator.hasPreviousPage %}
                <li class="page-item">
                    <a class="page-link" href="{{ path(targetPath, {page: paginator.previousPage}) }}" tabindex="-1" aria-disabled="true">
                        <twig:ux:icon name="tabler:chevron-left" width="1em" height="1em" />
                        {{ 'label.previous'|trans }}
                    </a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                        <twig:ux:icon name="tabler:chevron-left" width="1em" height="1em" />
                        {{ 'label.previous'|trans }}
                    </a>
                </li>
            {% endif %}
            {% if 2 >= paginator.lastPage %}
                {% for i in 1..paginator.lastPage %}
                    {% if i == paginator.currentPage %}
                        <li class="page-item active">
                            <span class="page-link">{{ i }}</span>
                        </li>
                    {% else %}
                        <li class="page-item"><a class="page-link" href="{{ path(targetPath, {page: i}) }}">{{ i }}</a></li>
                    {% endif %}
                {% endfor %}
            {% else %}
                {% if 1 > paginator.currentPage - 1 and paginator.currentPage < paginator.lastPage %}
                    {% set min = 1 %}
                    {% set max = paginator.currentPage + 2 %}
                {% elseif 1 <= paginator.currentPage - 1 and paginator.currentPage < paginator.lastPage %}
                    {% set min = paginator.currentPage - 1 %}
                    {% set max = paginator.currentPage + 1 %}
                {% elseif 1 <= paginator.currentPage - 1 and paginator.currentPage >= paginator.lastPage %}
                    {% set min = paginator.currentPage - 2 %}
                    {% set max = paginator.currentPage %}
                {% endif %}
                {% if paginator.currentPage > 3 %}
                    <li class="page-item">
                        <a class="page-link" href="{{ path(targetPath, {page: 1}) }}">1 ...</a>
                    </li>
                {% endif %}
                {% for i in min..max %}
                    {% if i == paginator.currentPage %}
                        <li class="page-item active">
                            <span class="page-link" >{{ i }}</span>
                        </li>
                    {% else %}
                        <li class="page-item"><a class="page-link" href="{{ path(targetPath, {page: i}) }}">{{ i }}</a></li>
                    {% endif %}
                {% endfor %}
                {% if paginator.lastPage - paginator.currentPage > 2 %}
                    <li class="page-item">
                        <a class="page-link" href="{{ path(targetPath, {page: paginator.lastPage}) }}">... {{ paginator.lastPage }}</a>
                    </li>
                {% endif %}
            {% endif %}
            {% if paginator.hasNextPage %}
                <li class="page-item">
                    <a class="page-link" href="{{ path(targetPath, {page: paginator.nextPage}) }}">
                        {{ 'label.next'|trans }}
                        <twig:ux:icon name="tabler:chevron-right" width="1em" height="1em" />
                    </a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                        {{ 'label.next'|trans }}
                        <twig:ux:icon name="tabler:chevron-right" width="1em" height="1em" />
                    </a>
                </li>
            {% endif %}
        </ul>
    {% endif %}
{% endmacro %}
