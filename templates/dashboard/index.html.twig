{% extends '_layout_vertical.html.twig' %}

{% block title %}Dashboard - {{ scope_label(scope) }} - {{ parent() }}{% endblock %}

{% block page_body %}
    <div class="container-xl">
        <twig:Breadcrumbs :items="[
            { label: 'link.statistics' }
        ]" />

        <div class="row g-4">
            <div class="col-12 col-md-3 col-lg-3">
                <twig:SidebarScopes :current="scope" />

                <div class="mt-2">
                    <twig:GranularitySwitch :scope="scope" :showPeriod="false" />
                </div>
            </div>

            <div class="col-12 col-md-9 col-lg-9">

                <div class="row g-2 align-items-center mb-2">
                    <div class="col">
                        <h2 class="page-title">
                            {{ scope_label(scope) }}
                        </h2>
                    </div>
                    <div class="col-auto ms-auto d-print-none">
                        <div class="d-flex">
                            <twig:GranularitySwitch :scope="scope" variant="dropdown" :showPeriod="true" />
                        </div>
                    </div>
                </div>

                {% if panel %}
                    {% if panel is null %}
                        <div class="card card-body text-center text-muted">
                            <div class="mb-2">No data available for {{ scope_label(scope) }}.</div>
                            <a class="btn btn-sm btn-outline-primary" href="{{ path('app_stats_dashboard') }}">
                                Back to overview
                            </a>
                        </div>
                    {% else %}
                        {{ include('dashboard/_panel.html.twig', {panel: panel}) }}
                    {% endif %}
                {% endif %}

                {% if cohortPanel %}
                    {% if cohortPanel is null %}
                        <div class="card card-body text-center text-muted">
                            <div class="mb-2">No data available for {{ scope_label(scope) }}.</div>
                            <a class="btn btn-sm btn-outline-primary" href="{{ path('app_stats_dashboard') }}">
                                Back to overview
                            </a>
                        </div>
                    {% else %}
                        {{ include('dashboard/_cohort_panel.html.twig', {cohortPanel: cohortPanel}) }}
                    {% endif %}
                {% endif %}

                <div class="row">
                    <div class="col-12 mt-3">
                        {{ component('AvailabilityMatrix', {
                            scopeType: context.scopeType,
                            scopeId: context.scopeId,
                        }) }}
                    </div>
                </div>

            </div>

        </div>
    </div>
{% endblock %}
